: cascade base

: around content -> {
<h1>
<span><a href="<: $c.req.uri_for('/') :>">Home</a> »
<: $c.args.service_name :> »
<: $c.args.section_name :></span>
</h1>

: my $path_info = $c.req.path_info;
<div class="pagination pagination-right">
<ul>
: if $path_info.match('^/view/') {
<li class="<: ($valid.valid('t') == 'h') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'h']) :>">1時間</a></li>
<li class="<: ($valid.valid('t') == 'hd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'hd']) :>">半日</a></li>
<li class="<: ($valid.valid('t') == 'd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'d']) :>">1日</a></li>
<li class="<: ($valid.valid('t') == 'w') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'w']) :>">1週間</a></li>
<li class="<: ($valid.valid('t') == 'm') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'m']) :>">1ヶ月</a></li>
<li class="<: ($valid.valid('t') == 'y') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'y']) :>">1年</a></li>

: } else if $path_info.match('^/view_complex/') { 
<li class="<: ($valid.valid('t') == 'h') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'h']) :>">1時間</a></li>
<li class="<: ($valid.valid('t') == 'hd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'hd']) :>">半日</a></li>
<li class="<: ($valid.valid('t') == 'd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'d']) :>">1日</a></li>
<li class="<: ($valid.valid('t') == 'w') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'w']) :>">1週間</a></li>
<li class="<: ($valid.valid('t') == 'm') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'m']) :>">1ヶ月</a></li>
<li class="<: ($valid.valid('t') == 'y') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/view_complex/'~$c.args.service_name~'/'~$c.args.section_name~'/'~$c.args.graph_name, [t=>'y']) :>">1年</a></li>

: } else {
<li class="<: ($valid.valid('t') == 'h') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'h']) :>">1時間</a></li>
<li class="<: ($valid.valid('t') == 'hd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'hd']) :>">半日</a></li>
<li class="<: ($valid.valid('t') == 'd') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'d']) :>">1日</a></li>
<li class="<: ($valid.valid('t') == 'w') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'w']) :>">1週間</a></li>
<li class="<: ($valid.valid('t') == 'm') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'m']) :>">1ヶ月</a></li>
<li class="<: ($valid.valid('t') == 'y') ? 'active' : '' :>"><a href="<: $c.req.uri_for('/list/'~$c.args.service_name~'/'~$c.args.section_name, [t=>'y']) :>">1年</a></li>
: }
</ul>
</div>


: for $metricses ->  $metrics {
: my $index = $~metrics.index;
  : if !$metrics.complex {
    : include "view.tx" { metrics => $metrics, index => $index };
  : } else {
    : include "view_complex.tx" { metrics => $metrics, index => $index };
  :}
: } # for metricses

: }


